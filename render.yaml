services:
  - type: web
    name: soapbox-server
    env: node
    plan: standard
    region: virginia
    repo: https://github.com/bluecollarsoapbox/soapbox-server
    branch: main
    buildCommand: npm ci
    startCommand: node bot.js
    autoDeploy: true
    healthCheckPath: /health
    envVars:
      - fromGroup: soapbox-shared   # ðŸ‘ˆ pulls in DISCORD_TOKEN, SOAPBOX_API_KEY, DATA_DIR, etc.
    disk:
      name: soapbox-data
      mountPath: /data
      sizeGB: 5

  - type: worker
    name: soapbox-bot
    env: node
    plan: starter
    region: virginia
    repo: https://github.com/bluecollarsoapbox/soapbox-server
    branch: main
    buildCommand: npm ci
    startCommand: node bot.js
    autoDeploy: true
    envVars:
      - fromGroup: soapbox-shared   # ðŸ‘ˆ same env group for the worker
    disk:
      name: soapbox-data
      mountPath: /data
      sizeGB: 5
