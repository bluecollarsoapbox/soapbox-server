# render.yaml â€” 2 services only: API (web) + Bot (worker)
services:
  - type: web
    name: soapbox-api
    env: node
    plan: starter
    rootDir: soapbox-server
    buildCommand: npm ci
    startCommand: node server.js        # <- your Express entry
    autoDeploy: true
    healthCheckPath: /health
    envVars:
      - fromGroup: soapbox-shared
    disk:
      name: soapbox-data
      mountPath: /data

  - type: worker
    name: soapbox-bot
    env: node
    plan: starter
    rootDir: soapbox-server
    buildCommand: npm ci
    startCommand: node bot.js           # <- your Discord bot entry
    autoDeploy: true
    envVars:
      - fromGroup: soapbox-shared
    disk:
      name: soapbox-data
      mountPath: /data

disks:
  - name: soapbox-data
    sizeGB: 1
